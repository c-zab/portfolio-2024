---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Welcome to Astro.">
  <main>
    <h1>Hola! My name is Carlos Zabaleta</h1>
  </main>
</Layout>

<h1 class="ml11">
  <span class="text-wrapper">
    <span class="line line1"></span>
    <span class="letters">Hello Goodbye</span>
  </span>
</h1>

<script>
  import anime from "animejs";

  // Wrap every letter in a span
  var textWrapper = document.querySelector(".ml11 .letters");
  if (textWrapper) {
    textWrapper.innerHTML = (textWrapper.textContent ?? "").replace(
      /([^\x00-\x80]|\w)/g,
      "<span class='letter'>$&</span>"
    );

    anime
      .timeline({
        easing: "easeOutExpo",
        duration: 500,
      })
      .add({
        targets: ".ml11 .line",
        scaleY: [0, 1],
        opacity: [0.5, 1],
        delay: 500,
      })
      .add({
        targets: ".ml11 .line",
        translateX: [0, textWrapper.getBoundingClientRect().width + 10],
        duration: 1000,
      })
      .add(
        {
          targets: ".ml11 .letter",
          opacity: [0, 1],
          duration: 600,
          offset: "-=775",
          delay: (el, i) => 40 * (i + 1),
        },
        "-=900"
      );
  }
  anime({
    targets: ".ml11 .line",
    opacity: [0, 1],
    easing: "linear",
    loop: true,
    duration: 1000,
  });
</script>

<style>
  .ml11 {
    font-weight: 700;
    font-size: 3.5em;
    color: aqua;
  }

  .ml11 .text-wrapper {
    position: relative;
    display: inline-block;
    padding-top: 0.1em;
    padding-right: 0.05em;
    padding-bottom: 0.15em;
  }

  .ml11 .line {
    opacity: 0;
    position: absolute;
    left: 0;
    height: 100%;
    width: 3px;
    background-color: #fff;
    transform-origin: 0 50%;
  }

  .ml11 .line1 {
    top: 0;
    left: 0;
  }

  .ml11 .letter {
    display: inline-block;
    line-height: 1em;
  }
  main {
    margin: auto;
    padding: 1rem;
    width: 800px;
    max-width: calc(100% - 2rem);
    color: white;
    font-size: 20px;
    line-height: 1.6;
  }

  .astro-a {
    position: absolute;
    top: -32px;
    left: 50%;
    transform: translatex(-50%);
    width: 220px;
    height: auto;
    z-index: -1;
  }
  h1 {
    font-size: 4rem;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    margin-bottom: 1em;
  }
</style>
