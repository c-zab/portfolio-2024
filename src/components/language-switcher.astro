---
import { getLocaleFromPath, getLocalizedPath } from "../utils/i18n";

const locales = ["en", "es"] as const;
const currentLocale = getLocaleFromPath(Astro.url.pathname);
---

<div class="relative inline-flex items-center bg-slate-100 dark:bg-slate-800 rounded-lg p-1">
  {
    locales.map((locale) => (
      <a
        href={getLocalizedPath("/", locale)}
        class={`relative px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200 ${
          locale === currentLocale
            ? "text-slate-900 dark:text-slate-100"
            : "text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"
        }`}
        aria-label={`Switch to ${locale === "en" ? "English" : "Español"}`}
      >
        {locale === currentLocale && <div class="absolute inset-0 bg-white dark:bg-slate-700 rounded-md shadow-sm" />}
        <span class="relative z-10">{locale === "en" ? "English" : "Español"}</span>
      </a>
    ))
  }
</div>
